---
import type { ImageDataProps } from '@elements/Image.astro'
import LookImage from '@elements/LookImage.astro'
import SectionHeading from '@elements/SectionHeading.astro'
import SliderButtons from '@elements/SliderButtons.astro'

export interface Props {
  heading?: string
  images?: Array<ImageDataProps>
}

const {
  heading = 'Галерея',
  images = [
    {
      src: '/images/gallery/1.jpg',
      alt: '',
    },
    {
      src: '/images/gallery/2.jpg',
      alt: '',
    },
    {
      src: '/images/gallery/3.jpg',
      alt: '',
    },
    {
      src: '/images/gallery/1.jpg',
      alt: '',
    },
    {
      src: '/images/gallery/2.jpg',
      alt: '',
    },
    {
      src: '/images/gallery/3.jpg',
      alt: '',
    },
  ],
} = Astro.props
---

<!-- BLOCK -->
<section class="gallery">
  <SectionHeading
    class="gallery__heading"
    text={heading}
  />

  <e-scroll class="gallery__slider">
    <SliderButtons
      class="gallery__slider__buttons"
      slot="static"
    />

    {
      images.map((image) => {
        return (
          <LookImage
            class="gallery__slider__image"
            image={{
              lazy: true,
              lazyBackground: true,
              cover: true,
              ...image,
            }}
          />
        )
      })
    }
  </e-scroll>
</section>

<style is:global>
  .gallery {
    padding: var(--section-vertical-padding) 0;
    padding-left: var(--screen-horisontal-padding);
    overflow: hidden;

    @media (max-width: 768px) {
      padding-left: 0;
    }
  }

  .gallery__heading {
    margin-bottom: 3.2rem;

    @media (max-width: 768px) {
      margin-bottom: 2.4rem;
      padding-left: var(--screen-horisontal-padding);
    }
  }

  .gallery__slider {
    --axis: x;
    --gap: 2.4rem;
    --sectional: true;
    --sections-in-view: 2;

    display: flex;
    gap: var(--gap);

    width: 100%;
    height: 42rem;
    padding-right: var(--screen-horisontal-padding);

    @media (max-width: 768px) {
      --gap: 0.8rem;
      --sections-in-view: 1;
      height: 27.6rem;
      padding-right: 0;
    }
  }

  .gallery__slider__buttons {
    position: absolute;
    right: var(--screen-horisontal-padding);
    bottom: calc(100% + 5rem);
  }

  .gallery__slider__image {
    width: 65.6rem;
    height: 100%;

    overflow: hidden;

    border-radius: 0.8rem;

    @media (max-width: 768px) {
      width: 35.3rem;
    }
  }
</style>
