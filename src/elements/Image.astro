---
import { getHref } from '@utils/url'
import MediaWrapper from './MediaWrapper.astro'

export interface ImageDataProps {
  src?: string | undefined
  alt?: string | undefined
}

export interface Props extends ImageDataProps {
  class?: string | undefined
  lazy?: boolean | undefined
  cover?: boolean | undefined
  contain?: boolean | undefined
  lazyBackground?: boolean | undefined
}

const {
  class: className,
  src = '/images/dev.jpg',
  alt = 'Альтернативный текст',
  lazy,
  cover,
  contain,
  lazyBackground,
  ...rest
} = Astro.props
---

<MediaWrapper
  class:list={['media-wrapper', className]}
  tag={'image-cloak'}
  {...rest}
  cover={cover}
  contain={contain}
  lazy-background={lazyBackground}
>
  <img
    src={getHref(src)}
    {alt}
    decoding="async"
    loading={lazy ? 'lazy' : 'eager'}
  /></MediaWrapper
>
