# Три топора

## Формы

Для отправки данных форм используется компонент <e-form>. Данные передаются в формате [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData) на адрес, указанный в атрибуте url.

Пример разметки формы:

```html
<e-form
  name="feedback"
  url="/test"
>
```

Вам потребуется настроить API-роут, который будет принимать запросы с указанного адреса.

## Скрипты

В этом проекте переходы между страницами происходят без их перезагрузки, поэтому скрипты нужно писать так, чтобы они правильно работали при динамическом обновлении контента.

### Основные принципы:

1. **Используйте кастомные элементы.**

    Кастомные элементы автоматически выполняют код через методы:

    - **connectedCallback** 

      запускается при добавлении элемента на страницу.

    - **disconnectedCallback** 

      запускается при удалении элемента.

2. **Подписывайтесь на события замены страниц.**

    Для управления логикой скриптов предусмотрены следующие события:

    - morphStart

     начало замены страницы.

    - morphComplete

     замена страницы завершена.

    - morphNewChildrenAdded

     новый контент добавлен на страницу.

    - morphOldChildrenRemoved

     старый контент удален.

Пример использования событий:

```ts
document.addEventListener('morphComplete', () => {
  console.log('Переход завершен');
});
```

## Использование атрибутов

Обращайте внимание на наличие атрибутов в разметке. Например, если элементы содержат стилизующие атрибуты, такие как:

```html
style="--index: n"
style="--reveal-index: n"
```

убедитесь, что они правильно проставлены.

## Блоки и структура страниц

### Блоки

Все страницы состоят из независимых сущностей, называемых блоками, которые хранятся в директории [blocks](/src/blocks/). Эти блоки представляют собой универсальные элементы, которые можно использовать многократно на странице. **Используйте их для создания шаблонов в CMS.**

#### Уникальные блоки

Блоки, которые используются только один раз на странице, находятся в папке [singletons](/src/singletons/).

### Комментарии для обозначения блоков:

- Повторяемые блоки помечаются:

  ```html
  <!-- BLOCK -->
  ```

- Уникальные:

  ```html
  <!-- SINGLETON -->
  ```

## Некоторые особенности

`<noscript>` элементы добавляйте только в конец `<body>`, а не в `<head>`.